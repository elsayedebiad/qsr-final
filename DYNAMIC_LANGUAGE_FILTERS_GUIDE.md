# دليل فلاتر اللغات المحدثة 🎯

## التحديثات الجديدة ✨

تم تطوير النظام ليستخدم **نظام موحد لمستويات اللغات** بأربع مستويات محددة!

---

## ما الجديد؟

### الاختيارات الثابتة الجديدة ✅
النظام الآن يحول جميع القيم إلى أربع مستويات محددة:
- ❌ **لا** - لا يتقن اللغة
- ⚠️ **ضعيف** - مستوى ضعيف
- ✅ **جيد** - مستوى جيد
- ⭐ **ممتاز** - مستوى ممتاز

**مهما كانت الكتابة في الشيت، سيتم تحويلها تلقائياً إلى أحد هذه المستويات!** 📊

---

## كيف يعمل النظام الآن؟

### 1. عند رفع ملف Excel:
```
| الاسم | مستوى العربية | مستوى الإنجليزية |
|-------|----------------|-------------------|
| أحمد  | جيد            | نعم               |
| فاطمة | ممتاز          | weak              |
| سارة  | لا             | جيد جداً          |
| محمد  | good           | ضعيف              |
```

### 2. التحويل التلقائي:
النظام يحول القيم تلقائياً:
- أحمد: عربية = **جيد**, إنجليزية = **جيد** (نعم → جيد)
- فاطمة: عربية = **ممتاز**, إنجليزية = **ضعيف** (weak → ضعيف)
- سارة: عربية = **لا**, إنجليزية = **ممتاز** (جيد جداً → ممتاز)
- محمد: عربية = **جيد** (good → جيد), إنجليزية = **ضعيف**

### 3. في صفحة Sales1:
سيظهر فلتر ثابت مع الاختيارات:
- الكل
- ❌ لا
- ⚠️ ضعيف
- ✅ جيد
- ⭐ ممتاز

---

## التغييرات التقنية:

### 1. Database Schema
تم إضافة حقلين جديدين:
```prisma
englishLevelRaw  String?  // لا، ضعيف، جيد، ممتاز
arabicLevelRaw   String?  // لا، ضعيف، جيد، ممتاز
```

### 2. Import System
النظام الآن يحفظ:
- **القيمة المحولة** (لا، ضعيف، جيد، ممتاز) في `englishLevelRaw` / `arabicLevelRaw`
- **القيمة القديمة** (YES/NO/WILLING) في `englishLevel` / `arabicLevel` للتوافق مع الأنظمة القديمة

### 3. Filters في Sales1
- اختيارات ثابتة: لا، ضعيف، جيد، ممتاز
- فلترة دقيقة حسب القيمة المحولة
- تصميم موحد مع أيقونات واضحة

---

## خطوات التفعيل:

### 1. تشغيل Migration (مطلوب مرة واحدة فقط):

```bash
cd /Users/tech.dep/Desktop/qsr-final
npx prisma migrate deploy
```

أو إذا لم ينجح الأمر أعلاه، نفذ SQL مباشرة على قاعدة البيانات:

```sql
ALTER TABLE "CV" ADD COLUMN IF NOT EXISTS "englishLevelRaw" TEXT;
ALTER TABLE "CV" ADD COLUMN IF NOT EXISTS "arabicLevelRaw" TEXT;
```

### 2. إعادة رفع البيانات (اختياري):

إذا كنت تريد تحديث البيانات الموجودة:
- قم برفع ملف Excel مرة أخرى من خلال نظام الرفع الذكي
- سيتم حفظ القيم الأصلية تلقائياً

### 3. اختبار النظام:

1. افتح صفحة Sales 1
2. اضغط على "فلاتر متقدمة"
3. شاهد فلتر "مستوى اللغة العربية" و "مستوى اللغة الإنجليزية"
4. ستجد جميع القيم الموجودة في الشيت!

---

## مثال عملي من شيتك الفعلي:

### القيم الموجودة في System Test_final.xlsx:

**مستوى العربية:**
- لا
- ضعيف
- متوسط
- نعم
- ممتاز

**مستوى الإنجليزية:**
- لا
- ضعيف
- متوسط
- مقبول
- ممتاز
- غير متاح

### التحويل التلقائي:

| القيمة في الشيت | تُحوّل إلى |
|-----------------|------------|
| لا              | ❌ لا       |
| غير متاح        | ❌ لا       |
| ضعيف            | ⚠️ ضعيف    |
| متوسط           | ✅ جيد      |
| مقبول           | ✅ جيد      |
| نعم             | ✅ جيد      |
| ممتاز           | ⭐ ممتاز    |

### في الفلتر ستظهر:
**اختيارات ثابتة:**
- الكل
- ❌ لا
- ⚠️ ضعيف
- ✅ جيد
- ⭐ ممتاز

**عند اختيار "جيد" سيظهر:**
- كل من عنده "متوسط" في الشيت
- كل من عنده "مقبول" في الشيت  
- كل من عنده "نعم" في الشيت

---

## ملاحظات مهمة:

### ✅ المميزات:
1. **مرونة كاملة** - اكتب أي مستوى تريده في الشيت
2. **عرض دقيق** - ما تكتبه في الشيت هو ما يظهر في الفلتر
3. **تلقائي** - لا حاجة لإعداد الاختيارات مسبقاً
4. **ذكي** - يعرض عدد السير الذاتية لكل مستوى

### ⚠️ انتبه:
1. تأكد من **توحيد الكتابة** في الشيت:
   - مثلاً: استخدم "جيد" في كل مكان، وليس "جيد" و "Good" و "جيد ." معاً
   - أي اختلاف في الكتابة سيظهر كاختيار منفصل

2. يمكنك استخدام:
   - عربي: نعم، جيد، ممتاز، جيد جداً، ضعيف، متوسط، إلخ
   - إنجليزي: YES, GOOD, EXCELLENT, FAIR, WEAK, AVERAGE, إلخ
   - مخلوط: جيد (Good)، ممتاز (Excellent)، إلخ

3. **لا حدود** على عدد المستويات - يمكنك استخدام 3 أو 5 أو 10 مستويات!

---

## التوافق مع الأنظمة القديمة:

النظام لا يزال يحتفظ بالقيم المحولة (`englishLevel` / `arabicLevel`) لضمان:
- التوافق مع الأجزاء الأخرى من النظام
- إمكانية الرجوع للنظام القديم إذا لزم الأمر
- عدم تأثر API endpoints الأخرى

---

## الخلاصة:

**الآن النظام يدعم مستويات لغة مخصصة بالكامل!** 

يمكنك كتابة أي مستوى تريده في الشيت وسيظهر تلقائياً في الفلتر 🎉

---

## تم التطوير: أكتوبر 2025 ✅

**فلاتر ديناميكية 100% من الشيت!** 🚀

