# โ ุชุฎุฒูู ุงูุจูุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Neon

## ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุชุนุฏูู Prisma Schema โ
```prisma
model Banner {
  id          Int         @id @default(autoincrement())
  salesPageId String
  imageUrl    String?     // ุงุฎุชูุงุฑู - ููุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ
  imageData   String?     @db.Text // ุงูุตูุฑุฉ ูู Base64
  deviceType  DeviceType
  order       Int         @default(0)
  isActive    Boolean     @default(true)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}
```

### 2. ุชุนุฏูู API Routes โ
- ุงูุจูุฑุงุช ุชูุญูุธ ูู Base64 ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุง ุญุงุฌุฉ ููู file system ุฃู Vercel Blob Storage

### 3. ุชุนุฏูู Components โ
- BannerCarousel.tsx ูุนุฑุถ ุงูุตูุฑ ูู `imageData`
- Dashboard ูุนุฑุถ ุงูุตูุฑ ูู `imageData`

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู ุนูู Vercel

### ุงูุฎุทูุฉ 1: ุชุดุบูู Migration ูุญููุงู (ุงุฎุชูุงุฑู)

ุฅุฐุง ููุช ุชุฑูุฏ ุชุฌุฑุจุฉ ูุญููุงู ุฃููุงู:

```bash
# ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL ูุญููุงู
npx prisma migrate dev --name add_banner_imageData

# ุฃู generate ููุท ุจุฏูู migration
npx prisma generate
```

### ุงูุฎุทูุฉ 2: ุชุทุจูู Migration ุนูู Neon (ูุจุงุดุฑ)

#### ุงูุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู Prisma Migrate Deploy (ููุตู ุจู)

```bash
# ูู terminal
npx prisma migrate deploy
```

ุฃู ูู Vercel Dashboard:
1. ุงุฐูุจ ุฅูู: Settings โ Environment Variables
2. ุชุฃูุฏ ูู ูุฌูุฏ `DATABASE_URL`
3. Vercel ุณูุนูู auto-migration ุนูุฏ ุงูุจูุงุก ุงูุชุงูู

#### ุงูุทุฑููุฉ 2: SQL ูุจุงุดุฑ ุนูู Neon

ุฅุฐุง ูุงุฌูุช ูุดุงููุ ููููู ุชุดุบูู SQL ูุจุงุดุฑุฉ:

1. ุงุฐูุจ ุฅูู: https://console.neon.tech
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู SQL Editor
4. ูู ุจุชุดุบูู:

```sql
-- ุฅุถุงูุฉ ุนููุฏ imageData ุฅูู ุฌุฏูู banners
ALTER TABLE banners 
ADD COLUMN "imageData" TEXT;

-- ุฌุนู imageUrl ุงุฎุชูุงุฑู (ุฅุฐุง ูู ููู ูุฐูู)
ALTER TABLE banners 
ALTER COLUMN "imageUrl" DROP NOT NULL;
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู Migration

ุจุนุฏ deploymentุ ุชุญูู ูู ุฃู:
1. โ ุงูุจูุฑุงุช ุงูุฌุฏูุฏุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ
2. โ ุงูุจูุฑุงุช ุงููุฏููุฉ (ุฅุฐุง ูุฌุฏุช) ูุง ุชุฒุงู ุชุนูู
3. โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู logs

---

## ๐ฏ ุงููุฒุงูุง

### โ ูุง ุญุงุฌุฉ ูู Vercel Blob Storage
- ุชูููุฑ ุชูููุฉ
- ูู ุดูุก ูู ููุงู ูุงุญุฏ

### โ ุงูุจูุงูุงุช ุฏุงุฆูุฉ
- ุงูุจูุฑุงุช ูุญููุธุฉ ูู Neon PostgreSQL
- ูุง ุชุฎุชูู ุจุนุฏ deployment

### โ Backup ุณูู
- ูุณุฎ ุงุญุชูุงุทู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุดูู ุงูุจูุฑุงุช

### โ ุงูุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ
- ุงูุจูุฑุงุช ุงููุฏููุฉ (imageUrl) ูุง ุชุฒุงู ุชุนูู
- ุงูุจูุฑุงุช ุงูุฌุฏูุฏุฉ (imageData) ุฃูุถู

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุญุฌู ุงูุตูุฑ
- **ูููุตุญ:** ุตูุฑ ุฃูู ูู 500 KB ููู ุจูุฑ
- **ุงูุญุฏ ุงูุฃูุตู:** 1 MB ููู ุจูุฑ
- PostgreSQL ูุฏุนู ุญุชู 1 GB ููู ุญูู Text

### 2. ุงูุฃุฏุงุก
- Base64 ูุฒูุฏ ุญุฌู ุงูุตูุฑุฉ ุจู ~33%
- ููู ููุจูุฑุงุช (ุนุฏุฏ ูููู) ุงูุฃุฏุงุก ููุชุงุฒ
- ุงูุตูุฑ ููุฎุฒูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช = ุณุฑุนุฉ ุนุงููุฉ

### 3. ุงูุจูุฑุงุช ุงููุฏููุฉ
ุฅุฐุง ูุงูุช ูุฏูู ุจูุฑุงุช ูุฏููุฉ ูู file system:
- ุณุชุฎุชูู ุจุนุฏ deployment ุงูุชุงูู
- ุงุฑูุนูุง ูุฑุฉ ุฃุฎุฑู ูู Dashboard
- ุณุชูุญูุธ ุชููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ูุญููุงู
```bash
npm run dev
```
- ุงุฐูุจ ุฅูู `/dashboard/banners`
- ุงุฑูุน ุจูุฑ ุฌุฏูุฏ
- ุชุญูู ูู ุธููุฑู ูู ุตูุญุฉ Sales

### 2. ุนูู Vercel
ุจุนุฏ deployment:
- ุงุฐูุจ ุฅูู ุฃู ุตูุญุฉ sales (sales1, sales2, ุฅูุฎ)
- ุชุฃูุฏ ูู ุธููุฑ ุงูุจูุฑุงุช
- ุฑุงูุจ Vercel Logs ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

---

## ๐ ุงููุฑู ุจูู ุงูุญููู

| ุงูููุฒุฉ | File System | Vercel Blob | Database (Neon) |
|--------|-------------|-------------|-----------------|
| **ุงูุซุจุงุช** | โ ูุฎุชูู ุจุนุฏ deployment | โ ุฏุงุฆู | โ ุฏุงุฆู |
| **ุงูุชูููุฉ** | โ ูุฌุงูู | ๐ฐ ูุฏููุน ุจุนุฏ ุงูุญุฏ ุงููุฌุงูู | โ ุถูู ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| **ุงูุฃุฏุงุก** | โก ุณุฑูุน ุฌุฏุงู | โก ุณุฑูุน (CDN) | โก ุณุฑูุน |
| **Backup** | โ ุตุนุจ | โ๏ธ ูููุตู | โ ุถูู backup ุงููุงุนุฏุฉ |
| **ุงูุฅุนุฏุงุฏ** | โ ุจุณูุท | โ๏ธ ูุญุชุงุฌ Token | โ ุจุณูุท |

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. Deploy ุฅูู Vercel โ
```bash
git push origin main
```

### 2. ุฑุงูุจ ุงูุจูุงุก
- ุงุฐูุจ ุฅูู Vercel Dashboard
- ุฑุงูุจ Deployment Logs
- ุชุฃูุฏ ูู ูุฌุงุญ Migration

### 3. ุงุฎุชุจุฑ ุงูุจูุฑุงุช
- ุงุฑูุน ุจูุฑ ุฌุฏูุฏ ูู Dashboard
- ุชุญูู ูู ุธููุฑู ูู ุตูุญุงุช Sales
- ุฌุฑุจ ุญุฐู ูุฅุนุงุฏุฉ ุชุฑุชูุจ

---

## โ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Column imageData does not exist"
**ุงูุญู:**
```bash
npx prisma migrate deploy
```

### ุฎุทุฃ: "File too large"
**ุงูุญู:** ููู ุญุฌู ุงูุตูุฑุฉ ูุจู ุงูุฑูุน (< 500 KB ููุตู ุจู)

### ุงูุจูุฑุงุช ูุง ุชุธูุฑ
**ุชุญูู ูู:**
1. ูู ุงูุจูุฑ ููุนูู (isActive = true)ุ
2. ูู ุงูุจูุฑ ููุตูุญุฉ ุงูุตุญูุญุฉ (salesPageId)ุ
3. ูู ุงูุจูุฑ ูููุน ุงูุฌูุงุฒ ุงูุตุญูุญ (MOBILE/DESKTOP)ุ

---

## ๐ ุงูููุงุฑุฏ

- [Prisma Migrations](https://www.prisma.io/docs/concepts/components/prisma-migrate)
- [Neon PostgreSQL](https://neon.tech/docs)
- [Base64 Images in Database](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

---

ุชู ุงูุชุญุฏูุซ: 4 ุฃูุชูุจุฑ 2025

