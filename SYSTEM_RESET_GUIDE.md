# 🔄 دليل إعادة تعيين النظام

## 📋 نظرة عامة
تم إضافة ميزة إعادة تعيين النظام بالكامل للسماح بحذف جميع البيانات التجريبية والبدء بالبيانات الحقيقية.

## ⚡ طرق إعادة التعيين

### 1️⃣ من واجهة المستخدم
1. قم بتسجيل الدخول كمطور أو مدير عام
2. افتح القائمة الجانبية
3. اضغط على زر **"إعادة تعيين النظام"** (باللون البرتقالي/الأحمر)
4. سيظهر modal تأكيد مع قائمة البيانات التي سيتم حذفها
5. اضغط **"نعم، احذف كل شيء"** للمتابعة
6. انتظر حتى اكتمال العملية
7. سيتم إعادة تحميل الصفحة تلقائياً

### 2️⃣ من Terminal
```bash
# تشغيل سكريبت إعادة التعيين
node scripts/reset-system.js

# سيطلب منك كتابة "DELETE ALL" للتأكيد
```

### 3️⃣ عبر API مباشرة
```javascript
const response = await fetch('/api/reset-data', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
})
```

## 🗑️ البيانات التي سيتم حذفها

### ✅ سيتم حذف:
- **جميع السير الذاتية** (CVs)
- **جميع نسخ السير الذاتية** (CV Versions)
- **جميع العقود** (Contracts)
- **جميع الحجوزات** (Bookings)
- **جميع الأنشطة** (Activity Logs)
- **جميع الإشعارات** (Notifications)
- **جميع الجلسات** (Sessions & User Sessions)
- **جميع تفعيلات الدخول** (Login Activations)
- **جميع البنرات الإعلانية** (Banners)
- **جميع إعدادات المبيعات** (Sales Configs)
- **جميع إعدادات النظام** (System Settings)
- **جميع المستخدمين** (عدا developer@system.local و admin@qsr.com)

### ❌ لن يتم حذف:
- حساب المطور (developer@system.local)
- حساب المدير العام (admin@qsr.com)
- ملفات النظام والكود
- قاعدة البيانات نفسها (فقط المحتوى)

## 🔐 الصلاحيات المطلوبة

يمكن إعادة التعيين فقط بواسطة:
- **DEVELOPER** role
- **ADMIN** role
- حساب **developer@system.local**

## 🎯 متى تستخدم هذه الميزة

- **قبل الإطلاق الرسمي**: لحذف كل البيانات التجريبية
- **بداية جديدة**: عند الحاجة لنظام نظيف
- **بعد الاختبار**: لحذف بيانات الاختبار

## ⚠️ تحذيرات مهمة

1. **لا يمكن التراجع**: هذا الإجراء نهائي ولا يمكن استرجاع البيانات المحذوفة
2. **نسخ احتياطي**: تأكد من أخذ نسخة احتياطية إذا كنت تحتاج أي بيانات
3. **المستخدمون النشطون**: سيتم تسجيل خروج جميع المستخدمين
4. **الجلسات**: جميع الجلسات النشطة سيتم إنهاؤها

## 📊 بعد إعادة التعيين

بعد اكتمال إعادة التعيين:
1. النظام جاهز للبيانات الحقيقية
2. جميع ID sequences تبدأ من 1
3. لا توجد أي بيانات سابقة
4. يبقى فقط حسابات المدير والمطور

## 🛠️ الملفات المحدثة

- `/src/app/api/reset-data/route.ts` - API endpoint
- `/src/components/Sidebar.tsx` - زر إعادة التعيين و Modal
- `/scripts/reset-system.js` - سكريبت Terminal
- `/prisma/schema.prisma` - تعريف الجداول

## 📝 سجل التغييرات

- **تاريخ الإضافة**: اليوم
- **المطور**: النظام
- **السبب**: طلب حذف جميع البيانات التجريبية للبدء بالبيانات الحقيقية

## 🚀 نصائح للاستخدام

1. **قبل الحذف**: راجع قائمة البيانات في Modal
2. **بعد الحذف**: ابدأ برفع البيانات الحقيقية مباشرة
3. **للاختبار**: يمكنك تجربة الميزة على بيئة تطوير أولاً

---

> 💡 **ملاحظة**: هذه الميزة قوية جداً، استخدمها بحذر!
