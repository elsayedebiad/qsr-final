# โ ุงูุชูุงุตู ุงููุงุฌุญ ูููุบู ุงูุชุญููู ูููุนูุฏ ุงูุฑูู ููุฃุตู

## ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ:

**ุนูุฏ ุงูุถุบุท ุนูู ุฃููููุฉ WhatsApp ูุงูุชูุงุตู:**
1. โ ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "ุชู ุงูุชูุงุตู"
2. โ ุฅูุบุงุก ุงููุคูุช (deadlineAt = null)
3. โ ุฅูุบุงุก ุงูุชุญููู - ุงูุฑูู ูุนูุฏ ููุดุฎุต ุงูุฃุตูู
4. โ ุญุฐู ุฌููุน ูุนูููุงุช ุงูุชุญููู

---

## ๐ฏ ุงูุณููุงุฑูููุงุช:

### **ุณููุงุฑูู 1: ุงูุดุฎุต ุงูุฃุตูู ูุชูุงุตู ูุจู ุงูุชูุงุก ุงูููุช** โ

#### ุงูุฎุทูุงุช:
```
1. ุงูุฑูู: 0501234567
   ุงููุงูู ุงูุฃุตูู: "ุนูู" (sales1)
   
2. ุงูุฃุฏูู ูุญูู ุงูุฑูู ุฅูู "ุฃุญูุฏ" ููุฏุฉ 30 ุฏูููุฉ
   โ
   - ุงูุฑูู ูุญูู ูุน ูุคูุช โฑ๏ธ
   - "ุนูู" ูุฑู: 0501234567 + ุนุฏุงุฏ 29:45
   - "ุฃุญูุฏ" ูุฑู: 0501234567 + ุนุฏุงุฏ 29:45
   
3. "ุนูู" ูุถุบุท ุนูู WhatsApp ููุชูุงุตู โ
   โ
   ุงููุธุงู ุชููุงุฆูุงู:
   - isContacted = true
   - contactedAt = ุงูุขู
   - ุฅูุบุงุก ุงูุชุญููู (isTransferred = false)
   - ุญุฐู ุงููุคูุช (deadlineAt = null)
   - ุงูุฑูู ูุนูุฏ ูู sales1
   - ุญุฐู ุฌููุน ูุนูููุงุช ุงูุชุญููู
   
4. ุงููุชูุฌุฉ:
   - "ุนูู" ูุฑู: 0501234567 (ูุดุทุ ุชู ุงูุชูุงุตู โ)
   - "ุฃุญูุฏ": ูุง ูุฑู ุงูุฑูู (ุงุฎุชูู ูู ูุงุฆูุชู)
   - ุงูุฑูู ุนุงุฏ ูู "ุนูู" ูุฃู ุงูุชุญููู ูู ูุญุฏุซ!
```

---

### **ุณููุงุฑูู 2: ุงูุดุฎุต ุงููุญูู ุฅููู ูุชูุงุตู** โ

#### ุงูุฎุทูุงุช:
```
1. ุงูุฑูู ูุญูู ูู "ุนูู" ุฅูู "ุฃุญูุฏ" ููุฏุฉ 30 ุฏูููุฉ
   
2. "ุฃุญูุฏ" ูุถุบุท ุนูู WhatsApp ููุชูุงุตู โ
   โ
   ุงููุธุงู ุชููุงุฆูุงู:
   - isContacted = true
   - ุฅูุบุงุก ุงูุชุญููู
   - ุงูุฑูู ูุนูุฏ ูู "ุนูู" (ุงูุฃุตู)
   
3. ุงููุชูุฌุฉ:
   - "ุนูู" ูุฑู: 0501234567 (ุชู ุงูุชูุงุตู โ)
   - "ุฃุญูุฏ": ุงุฎุชูู ุงูุฑูู ูู ูุงุฆูุชู
   - ุงููููุฉ ูุฌุญุช! ุงูุฑูู ุนุงุฏ ููุฃุตู
```

---

### **ุณููุงุฑูู 3: ุชุญููู ููุฑู (ุจุฏูู ููุช)** โ

#### ุงูุฎุทูุงุช:
```
1. ุงูุฑูู ูุญูู ูู "ุนูู" ุฅูู "ุฃุญูุฏ" ุจุฏูู ููุช
   - "ุนูู" ูุฑู: โโโโโโโโ (blur)
   - "ุฃุญูุฏ" ูุฑู: 0501234567 (ูุงุถุญ)
   
2. "ุฃุญูุฏ" ูุถุบุท WhatsApp ููุชูุงุตู โ
   โ
   - ุฅูุบุงุก ุงูุชุญููู
   - ุงูุฑูู ูุนูุฏ ูู "ุนูู"
   
3. ุงููุชูุฌุฉ:
   - "ุนูู": 0501234567 (ุชู ุงูุชูุงุตู โุ ูุงุถุญ!)
   - "ุฃุญูุฏ": ุงุฎุชูู ุงูุฑูู
```

---

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ:

### **ูู `list/route.ts` - PATCH endpoint:**

```typescript
if (isContacted) {
  updateData.contactedAt = new Date()
  
  // ุฅูุบุงุก ุงูุชุญููู ูุงููุคูุช - ุงูุฑูู ูุนูุฏ ููุดุฎุต ุงูุฃุตูู
  if (phoneNumber.isTransferred) {
    // ุฌูุจ originalSalesPageId
    const fullPhoneNumber = await db.phoneNumber.findUnique({
      where: { id },
      select: { originalSalesPageId: true, salesPageId: true }
    })
    
    // ุฅูุบุงุก ุงูุชุญููู
    updateData.isTransferred = false
    updateData.transferredToUserId = null
    updateData.transferredBy = null
    updateData.transferredAt = null
    updateData.transferReason = null
    
    // ุฅุนุงุฏุฉ ููุตูุญุฉ ุงูุฃุตููุฉ
    updateData.salesPageId = fullPhoneNumber?.originalSalesPageId || fullPhoneNumber?.salesPageId
    updateData.originalSalesPageId = null
    
    // ุญุฐู ุงููุคูุช
    updateData.deadlineAt = null
    updateData.deadlineHours = null
    updateData.deadlineMinutes = null
    updateData.deadlineSeconds = null
    updateData.isExpired = false
    updateData.expiredAt = null
  }
}
```

---

## ๐ ุฏูุฑุฉ ุญูุงุฉ ุงูุฑูู:

```
1. ุงูุจุฏุงูุฉ
   โโ ุงูุฑูู: 0501234567
   โโ ุงููุงูู: ุนูู (sales1)
   โโ ุงูุญุงูุฉ: ูุดุท โ

2. ุงูุชุญููู ูุน ูุคูุช
   โโ ูุญูู ุฅูู: ุฃุญูุฏ
   โโ ุงููุฏุฉ: 30 ุฏูููุฉ
   โโ ุงูุญุงูุฉ: ูุญูู โฑ๏ธ
   โโ ุงููุคูุช: 29:45...

3. ุงูุชูุงุตู ุงููุงุฌุญ โ
   โโ "ุนูู" ุฃู "ุฃุญูุฏ" ูุถุบุท WhatsApp
   โโ isContacted = true
   โโ ุงููุธุงู ุชููุงุฆูุงู:
       โโ ุฅูุบุงุก ุงูุชุญููู
       โโ ุญุฐู ุงููุคูุช
       โโ ุงูุฑูู ูุนูุฏ ูู sales1

4. ุงูููุงูุฉ
   โโ ุงูุฑูู: 0501234567
   โโ ุงููุงูู: ุนูู (sales1) โ ุนุงุฏ ููุฃุตู!
   โโ ุงูุญุงูุฉ: ุชู ุงูุชูุงุตู โ
   โโ ูุง ุชูุฌุฏ ุขุซุงุฑ ููุชุญููู
```

---

## โจ ุงูููุงุฆุฏ:

### โ **ุชููุงุฆูุฉ ูุงููุฉ**:
- ูุง ุญุงุฌุฉ ูุชุฏุฎู ุงูุฃุฏูู
- ุนูุฏ ุงูุชูุงุตู โ ูู ุดูุก ูุฑุฌุน ููุฃุตู

### โ **ุนุฏุงูุฉ ูู ุงูุชูุฒูุน**:
- ูู ูุชูุงุตู ุฃููุงูุ ุงูุฑูู ูุนูุฏ ูู
- ุชุญููุฒ ููุณุฑุนุฉ ูู ุงูุชูุงุตู

### โ **ุณุฌู ูุธูู**:
- ุงูุฑูู ูุนูุฏ ูุตุงุญุจู ุงูุฃุตูู
- ูุงุถุญ ููุดุท ูุน badge "ุชู ุงูุชูุงุตู โ"

### โ **ูุนูู ูู ูู ุงูุญุงูุงุช**:
- โ ุชุญููู ูุน ููุช
- โ ุชุญููู ุจุฏูู ููุช
- โ ุณูุงุก ุชูุงุตู ุงูุฃุตูู ุฃู ุงููุญูู ุฅููู

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู:

### **ูุจู ุงูุชูุงุตู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุฑูู: 0501234567          โ
โ โฑ๏ธ 29:45                   โ
โ ุงูุตูุญุฉ: sales1             โ
โ โ ุฃุญูุฏ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ุจุนุฏ ุงูุชูุงุตู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุฑูู: 0501234567          โ
โ โ ุชู ุงูุชูุงุตู              โ
โ ุงูุตูุญุฉ: sales1             โ
โ (ูุง ุชูุฌุฏ ูุนูููุงุช ุชุญููู)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุงูููุงุฑูุฉ:

| ุงูุญูู | ูุจู ุงูุชูุงุตู | ุจุนุฏ ุงูุชูุงุตู |
|-------|-------------|-------------|
| isContacted | false | **true** โ |
| isTransferred | true | **false** โ |
| transferredToUserId | ุฃุญูุฏ | **null** โ |
| salesPageId | sales1 | **sales1** โ |
| originalSalesPageId | sales1 | **null** โ |
| deadlineAt | 17:00 | **null** โ |
| isExpired | false | **false** โ |

---

**ุฌุงูุฒ! ุงูุชูุงุตู ุงููุงุฌุญ ุงูุขู ูููุบู ุงูุชุญููู ุชููุงุฆูุงู! ๐**
