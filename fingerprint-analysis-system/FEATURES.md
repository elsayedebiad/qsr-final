# 🌟 دليل الميزات الجديدة | New Features Guide

---

## 📊 إجمالي الساعات عند الفلترة

### الميزة
عند اختيار موظف معين من الفلتر، يظهر **صندوق ملخص شامل** يحتوي على:

1. **اسم الموظف** - عرض واضح للموظف المختار
2. **إجمالي الساعات** - مجموع ساعات العمل (ساعات + دقائق)
3. **أيام العمل / أيام الغياب** - مقارنة بين الأيام المُسجلة والأيام الغائبة

### كيفية الاستخدام
```
1. انتقل إلى "التقرير اليومي المفصل"
2. من القائمة المنسدلة "تصفية حسب ID الموظف"، اختر موظفاً
3. سيظهر الصندوق تلقائياً أعلى الجدول
```

### حساب أيام الغياب
النظام يحسب أيام الغياب تلقائياً بالطريقة التالية:
- يحدد الفترة الزمنية من أول تاريخ إلى آخر تاريخ في السجلات
- يستثني أيام العطلات (الجمعة)
- يطرح أيام العمل المُسجلة من إجمالي أيام العمل المتوقعة
- النتيجة = أيام الغياب

**مثال:**
```
الفترة: من 1 إلى 31 أكتوبر (31 يوم)
أيام العطلة (الجمعات): 4 أيام
أيام العمل المتوقعة: 31 - 4 = 27 يوم
أيام العمل المُسجلة: 20 يوم
أيام الغياب: 27 - 20 = 7 أيام
```

---

## 📅 عرض اسم اليوم

### الميزة
- إضافة **عمود جديد** في الجدول يعرض اسم اليوم بالعربية
- أسماء الأيام: الأحد، الاثنين، الثلاثاء، الأربعاء، الخميس، **الجمعة**، السبت
- تمييز أيام العطلات (الجمعة) بلون **أحمر**
- إضافة علامة **(عطلة)** بجانب يوم الجمعة

### التصميم
- **أيام العمل العادية:** نص رمادي
- **يوم الجمعة (عطلة):** نص أحمر + علامة "عطلة"
- **في الطباعة:** خلفية وردية لأيام العطلات

### تخصيص أيام العطلة
يمكنك تغيير أيام العطلة من ملف `js/config.js`:

```javascript
// Weekend Days (0 = Sunday, 6 = Saturday)
WEEKEND_DAYS: [5], // الجمعة

// لجعل الجمعة والسبت عطلة:
WEEKEND_DAYS: [5, 6], // الجمعة والسبت

// لجعل الأحد عطلة:
WEEKEND_DAYS: [0], // الأحد
```

**ملاحظة:** 0 = الأحد، 1 = الاثنين، ... 6 = السبت

---

## 🖨️ تقرير الطباعة الاحترافي

### الميزة
عند الضغط على **"طباعة"** أو `Ctrl + P`، يتم إنشاء تقرير احترافي يتضمن:

### 1. **الترويسة (Header)**
```
┌────────────────────────────────────────────────┐
│        تقرير حضور الموظف: [الاسم]             │
│                  (ID: [الرقم])                 │
├────────────────────────────────────────────────┤
│  الفترة: [الشهر والسنة]                      │
│  تاريخ الإنشاء: [التاريخ الحالي]             │
└────────────────────────────────────────────────┘
```

### 2. **صندوق الملخص (Summary Box)**
```
┌─────────────────┬─────────────────┬─────────────────┐
│ إجمالي الساعات  │   أيام العمل    │   أيام الغياب   │
│   [XX] س [XX] د│      [XX]       │      [XX]       │
└─────────────────┴─────────────────┴─────────────────┘
```

**مع تنبيهات ذكية:**
- ⚠️ **تنبيه:** يوجد X يوم بسجل واحد فقط (يحتاج مراجعة)
- 📌 **ملاحظة:** تم العمل في X يوم عطلة
- 📊 **متوسط العمل اليومي:** X س و X د

### 3. **الجدول المفصل**
- جدول منسق بألوان احترافية
- صفوف متناوبة الألوان (Zebra Stripes)
- **أيام العطلات:** خلفية وردية
- ترويسة زرقاء بنص أبيض
- حدود واضحة ومرتبة

### 4. **التذييل (Footer)**
```
────────────────────────────────────────────────
تم إنشاء هذا التقرير بواسطة HR Portal v2.0
[التاريخ والوقت]
────────────────────────────────────────────────
```

### مميزات إضافية
- دعم طباعة متعددة الصفحات
- كل صفحة تحتفظ بترويسة الجدول
- تجنب قص الصفوف في المنتصف
- تصميم مُحسّن للطباعة بالأبيض والأسود

---

## 📤 التصدير المُحسّن

### CSV
الآن يتضمن:
- عمود **"اليوم"** - اسم اليوم بالعربية
- عمود **"عطلة"** - (نعم/لا)

```csv
ID,اسم الموظف,التاريخ,اليوم,أول_دخول,آخر_خروج,صافي_ساعات_العمل,صافي_بالدقائق,الفارق_عن_الهدف_بالدقائق,حالة_السجل,عطلة
1,أحمد,2024-10-04,الجمعة,08:15,17:30,8 س و 15 د,495,15,التزام بالهدف,نعم
```

### Excel
تحسينات:
- عمود **"اليوم"** مضاف
- عمود **"عطلة"** مضاف
- تنسيق احترافي
- عرض أعمدة مُحسّن

### PDF
يتضمن:
- عمود "Day" لاسم اليوم
- جداول منسقة
- ترويسة وتذييل احترافيين

---

## 🎨 التحسينات البصرية

### صندوق إجمالي الساعات
```
┌────────────────────────────────────────────────────────────┐
│  🧑‍💼 الموظف: [أحمد]                                       │
│  ⏱️  إجمالي الساعات: [160 س و 30 د]                      │
│  📅 أيام العمل: [20] / أيام الغياب: [2]                   │
└────────────────────────────────────────────────────────────┘
```
- تدرج لوني جميل (أزرق فاتح → بنفسجي فاتح)
- أيقونات معبرة
- خط كبير وواضح للأرقام المهمة
- **أيام العمل:** باللون الأخضر ✅
- **أيام الغياب:** باللون الأحمر ❌

### عمود اليوم في الجدول
- **أيام العمل:** نص رمادي عادي
- **يوم الجمعة:** 
  - نص أحمر غامق
  - خط عريض (Bold)
  - علامة "(عطلة)" صغيرة بجانبه
  
### تمييز الصفوف
- **أيام العطلة:** خلفية وردية خفيفة
- **سجل واحد فقط:** رمز تحذير أحمر "(سجل واحد)"
- **Hover Effect:** تأثير عند تمرير الماوس

---

## 🔧 الإعدادات المتقدمة

### تخصيص أيام العطلة

**ملف:** `js/config.js`

```javascript
// Weekend Days (0 = Sunday, 6 = Saturday)
WEEKEND_DAYS: [5], // الجمعة فقط

// أمثلة أخرى:
WEEKEND_DAYS: [5, 6],     // الجمعة والسبت
WEEKEND_DAYS: [0],        // الأحد فقط
WEEKEND_DAYS: [4, 5],     // الخميس والجمعة (لبعض الدول)
WEEKEND_DAYS: [],         // لا توجد أيام عطلة ثابتة
```

### تخصيص أسماء الأيام

```javascript
DAY_NAMES: [
    "الأحد", "الاثنين", "الثلاثاء", "الأربعاء", 
    "الخميس", "الجمعة", "السبت"
],
```

**لتغيير اللغة إلى الإنجليزية:**
```javascript
DAY_NAMES: [
    "Sunday", "Monday", "Tuesday", "Wednesday", 
    "Thursday", "Friday", "Saturday"
],
```

---

## 💡 أمثلة عملية

### مثال 1: مراجعة موظف واحد
```
1. اذهب إلى "التقرير اليومي المفصل"
2. اختر الموظف من القائمة المنسدلة
3. شاهد:
   - إجمالي ساعاته
   - أيام عمله
   - أيام غيابه
4. اطبع التقرير مباشرة
```

### مثال 2: التحقق من أيام العطلات
```
1. افتح التقرير
2. ابحث عن أيام الجمعة (ستكون بلون أحمر)
3. إذا وجدت سجلات في يوم جمعة، ستظهر تنبيهاً في تقرير الطباعة
```

### مثال 3: تصدير تقرير شهري
```
1. حدد الشهر والسنة من الفلاتر
2. اختر موظفاً (أو اتركه على "الكل")
3. اضغط على "تصدير Excel"
4. افتح الملف - سترى كل التفاصيل بما فيها اسم اليوم
```

---

## ❓ الأسئلة الشائعة

### س: كيف يتم حساب أيام الغياب؟
**ج:** النظام يحسب الفرق بين أيام العمل المتوقعة (بدون العطلات) وأيام العمل المُسجلة فعلياً.

### س: هل يمكن تغيير يوم العطلة؟
**ج:** نعم، من ملف `js/config.js`، غيّر قيمة `WEEKEND_DAYS`.

### س: لماذا أرى "0" في أيام الغياب؟
**ج:** هذا يعني أن الموظف حضر جميع أيام العمل المتوقعة، أو أن الفترة قصيرة جداً.

### س: هل التقرير يظهر أيام العطلات؟
**ج:** نعم، أيام العطلات تظهر بلون أحمر مع علامة "(عطلة)".

### س: كيف أطبع تقرير احترافي؟
**ج:** اختر موظفاً من الفلتر، ثم اضغط على "طباعة" أو `Ctrl + P`.

---

## 🎯 نصائح احترافية

### نصيحة 1: المراجعة الشهرية
```
1. حدد الشهر من الفلتر
2. راجع كل موظف على حدة
3. لاحظ أيام الغياب
4. اطبع تقرير لكل موظف
5. احفظ التقارير كـ PDF
```

### نصيحة 2: اكتشاف الأنماط
```
- ابحث عن أيام عطلة مع سجلات (عمل في الجمعة)
- راجع الموظفين ذوي الغياب المتكرر
- قارن متوسط الساعات بين الموظفين
```

### نصيحة 3: التقارير للإدارة
```
1. صدّر تقرير Excel شامل لجميع الموظفين
2. استخدم Excel لإنشاء رسوم بيانية إضافية
3. اطبع ملخصات فردية للموظفين المهمين
```

---

## 📞 الدعم

إذا كان لديك أسئلة أو اقتراحات:
- البريد الإلكتروني: support@hrportal.com
- GitHub Issues: [رابط المشروع]

---

**صُنع بـ ❤️ من أجل الموارد البشرية**

© 2024 HR Portal v2.0. جميع الحقوق محفوظة.

