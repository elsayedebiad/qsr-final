# ูุธุงู ุงูุชุญููู ูุตูุญุงุช ุงููุจูุนุงุช

## ุขููุฉ ุงูุนูู

### 1. ุงูุฒูุงุฑุฉ ุงููุจุงุดุฑุฉ ูุตูุญุฉ ูุญุฏุฏุฉ
ุนูุฏูุง ูุฒูุฑ ุงููุณุชุฎุฏู ุฑุงุจุท ูุจุงุดุฑ ูุตูุญุฉ ูุญุฏุฏุฉ (ูุซู `/sales3`):

```
ุงููุณุชุฎุฏู ูุฏุฎู โ /sales3
                โ
      SalesRedirectCheck ููุชุดู ุนุฏู ูุฌูุฏ ูุนุงูู from_sales
                โ
      ูุญูู ุฅูู โ /sales?target=sales3
                โ
      ุตูุญุฉ /sales ุชูุฑุฃ ูุนุงูู target
                โ
      ุชุญูู ูุจุงุดุฑุฉ ุฅูู โ /sales3?from_sales=true
                โ
      SalesRedirectCheck ูุฌุฏ ูุนุงูู from_sales
                โ
      ูุณูุญ ุจุงูุนุฑุถ โ (ูุฒูู ุงููุนุงูู ูู ุงูุฑุงุจุท)
```

### 2. ุงูุฒูุงุฑุฉ ุงูุนุงุฏูุฉ ูู /sales
ุนูุฏูุง ูุฒูุฑ ุงููุณุชุฎุฏู `/sales` ูุจุงุดุฑุฉ:

```
ุงููุณุชุฎุฏู ูุฏุฎู โ /sales
                โ
      ูุง ููุฌุฏ ูุนุงูู target
                โ
      ูุธุงู ุงูุชูุฒูุน ูุนูู (Google/Other)
                โ
      ูุฎุชุงุฑ ุตูุญุฉ ุนุดูุงุฆูุฉ ุญุณุจ ุงูููุงุนุฏ
                โ
      ูุญูู ุฅูู โ /salesX?from_sales=true
                โ
      SalesRedirectCheck ูุฌุฏ ูุนุงูู from_sales
                โ
      ูุณูุญ ุจุงูุนุฑุถ โ
```

## ุงููููุงุช ุงููุนุฏูุฉ

### 1. `/src/components/SalesRedirectCheck.tsx`
- ูุชุญูู ูู ูุฌูุฏ ูุนุงูู `from_sales` ูู ุงูุฑุงุจุท
- ุฅุฐุง ูุฌุฏ ุงููุนุงููุ ูุนูู ุฃููุง ุฌุฆูุง ูู `/sales` ููุณูุญ ุจุงูุนุฑุถ
- ุฅุฐุง ูู ููุฌุฏุ ูุญูู ุฅูู `/sales` ูุน ูุนุงูู `target`
- ููุธู ุงูุฑุงุจุท ุจุฅุฒุงูุฉ ูุนุงูู `from_sales` ุจุนุฏ ุงูุชุญูู

### 2. `/src/app/sales/page.tsx`
- ูุชุญูู ูู ูุฌูุฏ ูุนุงูู `target`
- ุฅุฐุง ูุฌุฏุ ูุญูู ูุจุงุดุฑุฉ ููุตูุญุฉ ุงููุทููุจุฉ **ูุน ุฅุถุงูุฉ `from_sales=true`**
- ุฅุฐุง ูู ููุฌุฏุ ูุทุจู ูุธุงู ุงูุชูุฒูุน ููุถูู `from_sales=true` ููุตูุญุฉ ุงููุฎุชุงุฑุฉ

## ุงููุฒุงูุง

โ **ุฌููุน ุงูุฒูุงุฑุงุช ุชูุฑ ุนุจุฑ /sales**: ุญุชู ุงูุฑูุงุจุท ุงููุจุงุดุฑุฉ
โ **ุชุชุจุน ุฏููู**: ูู ุฒูุงุฑุฉ ุชูุณุฌู ูู ุงููุธุงู
โ **ูุฑููุฉ**: ูููู ุงูุฐูุงุจ ูุตูุญุฉ ูุญุฏุฏุฉ ุฃู ุชุฑู ุงููุธุงู ูุฎุชุงุฑ
โ **ุงูุญูุงุธ ุนูู ุงููุนุงููุงุช**: UTM ูุบูุฑูุง ุชุจูู ูู ุงูุฑุงุจุท
โ **ุดูุงููุฉ**: ูุง ูุดุนุฑ ุงููุณุชุฎุฏู ุจุงูุชุญูููุงุช ุงููุชุนุฏุฏุฉ

## ุฃูุซูุฉ

### ูุซุงู 1: ุฑุงุจุท ูุจุงุดุฑ ูุน UTM
```
ุฒูุงุฑุฉ: https://domain.com/sales5?utm_source=google&utm_campaign=summer

ุงูุชุฏูู:
1. /sales5?utm_source=google&utm_campaign=summer
2. SalesRedirectCheck ูุง ูุฌุฏ from_sales
3. /sales?target=sales5&utm_source=google&utm_campaign=summer
4. /sales ุชูุฑุฃ target ูุชุถูู from_sales
5. /sales5?from_sales=true&utm_source=google&utm_campaign=summer
6. SalesRedirectCheck ูุฌุฏ from_sales ูููุธู ุงูุฑุงุจุท
7. /sales5?utm_source=google&utm_campaign=summer

ุงููุชูุฌุฉ: ุงููุณุชุฎุฏู ูู sales5 ูุน ุงูุญูุงุธ ุนูู ูุนุงููุงุช UTM โ
```

### ูุซุงู 2: ุฑุงุจุท /sales ุนุงุฏู
```
ุฒูุงุฑุฉ: https://domain.com/sales

ุงูุชุฏูู:
1. /sales
2. ูุธุงู ุงูุชูุฒูุน ูุฎุชุงุฑ ุตูุญุฉ (ูุซูุงู sales3)
3. /sales3?from_sales=true
4. SalesRedirectCheck ูุฌุฏ from_sales ูููุธู ุงูุฑุงุจุท
5. /sales3

ุงููุชูุฌุฉ: ุงููุณุชุฎุฏู ูู sales3 ุญุณุจ ุงูุชูุฒูุน โ
```

### ูุซุงู 3: ุฑุงุจุท sales1 ูู Google Ads
```
ุฒูุงุฑุฉ: https://domain.com/sales1?gclid=xxx

ุงูุชุฏูู:
1. /sales1?gclid=xxx
2. SalesRedirectCheck ูุง ูุฌุฏ from_sales
3. /sales?target=sales1&gclid=xxx
4. /sales ุชูุฑุฃ target ูุชุถูู from_sales
5. /sales1?from_sales=true&gclid=xxx
6. SalesRedirectCheck ูุฌุฏ from_sales ูููุธู ุงูุฑุงุจุท
7. /sales1?gclid=xxx

ุงููุชูุฌุฉ: ุงููุณุชุฎุฏู ูู sales1 ูุน ุงูุญูุงุธ ุนูู gclid โ
```

## ููุงุญุธุงุช ุชูููุฉ

- ูุณุชุฎุฏู `window.location.href` ููุชุญููู ุงูููุฑู ูู `SalesRedirectCheck`
- ูุณุชุฎุฏู `router.replace()` ูู `/sales` ูุชุฌูุจ ุฅุถุงูุฉ ุณุฌูุงุช ูููุชุตูุญ
- ูุนุงูู `from_sales=true` ููุถุงู ููุชุฃููุฏ ุฃู ุงูุฒูุงุฑุฉ ุฌุงุกุช ูู `/sales`
- ูุนุงูู `target` ููุญุฐู ุจุนุฏ ูุฑุงุกุชู ูู `/sales`
- ูุนุงูู `from_sales` ููุญุฐู ุจุนุฏ ุงูุชุญูู ููู ูู `SalesRedirectCheck`
- ุงุณุชุฎุฏุงู `window.history.replaceState()` ูุชูุธูู ุงูุฑุงุจุท ุฏูู ุฅุนุงุฏุฉ ุชุญููู

## ุงูุงุฎุชุจุงุฑ

ูุงุฎุชุจุงุฑ ุงููุธุงู:

1. ุงูุชุญ `/sales3` ูุจุงุดุฑุฉ โ ูุฌุจ ุฃู ููุฑ ุนุจุฑ `/sales`
2. ุงูุชุญ `/sales` โ ูุฌุจ ุฃู ูุฎุชุงุฑ ุตูุญุฉ ุนุดูุงุฆูุฉ
3. ุงูุชุญ `/sales5?utm_source=test` โ ูุฌุจ ุฃู ูุญุงูุธ ุนูู ุงููุนุงููุงุช
4. ุชุญูู ูู console logs ููุชุฃูุฏ ูู ุงูุชุฏูู ุงูุตุญูุญ

## Console Logs

```javascript
// ุงููุฑุฉ ุงูุฃููู: ุนูุฏ ุฒูุงุฑุฉ ูุจุงุดุฑุฉ ูู /sales3 (ุจุฏูู from_sales)
๐ Direct visit to sales page detected
   Redirecting through /sales distribution system...
   Referrer: Direct
   Current page: /sales3

// ูู ุตูุญุฉ /sales
๐ฏ Target page specified: sales3
   Redirecting directly to: /sales3

// ุงููุฑุฉ ุงูุซุงููุฉ: ุนูุฏ ุงููุตูู ูู /sales3 (ูุน from_sales=true)
โ Coming from /sales - Distribution check passed
```

## ููู ูููุน ูุฐุง ุงููุธุงู ุงูุญููุฉ ุงููุงููุงุฆูุฉุ

**ุงููุดููุฉ ุงููุญุชููุฉ**: ุจุฏูู ูุนุงูู `from_sales`ุ ูุงู `SalesRedirectCheck` ูุนุชูุฏ ุนูู `document.referrer` ุงูุฐู ูุฏ ูุง ูุนูู ุจุดูู ููุซูู.

**ุงูุญู**: 
1. `/sales` ุชุถูู `from_sales=true` ุนูุฏ ุงูุชุญููู
2. `SalesRedirectCheck` ูุชุญูู ูู ูุฌูุฏ ูุฐุง ุงููุนุงูู
3. ุฅุฐุง ูุฌุฏ ุงููุนุงูู = ุงูุฒูุงุฑุฉ ูู `/sales` โ (ูุณูุญ ุจุงูุนุฑุถ)
4. ุฅุฐุง ูู ููุฌุฏ = ุฒูุงุฑุฉ ูุจุงุดุฑุฉ โ (ูุญูู ูู `/sales`)

ูุฐุง ูุถูู ุฃู ูู ุตูุญุฉ ุณูุฒ ูููู ุงููุตูู ุฅูููุง **ููุท** ุนุจุฑ `/sales`!
